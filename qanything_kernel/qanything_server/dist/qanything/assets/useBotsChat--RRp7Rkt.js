import{Y as s}from"./index-CyT_JrVy.js";const a=s({id:"useBotsChat",state:()=>({QA_List:[],showModal:!1}),actions:{clearQAList(){this.QA_List=[]},setQaList(s){this.QA_List=s},async handleSource(s){const a=await Promise.all(s.map((async s=>{if(!s.pdf_source_info)return s;const a=await fetch(s.pdf_source_info.chunks_nos_url),e=await a.json(),{chunks:i,pageSizes:t}=this.formatChunks(e);return{...s,chunks:i,pageSizes:t}})));this.QA_List[this.QA_List.length-1].source=a},formatChunks(s){let a=[],e=[];return s.forEach((s=>{"normal"===s.chunk_type?s.locations.forEach((i=>{a[i.page_id]||(a[+i.page_id]={page_w:i.page_w,page_h:i.page_h}),e[i.page_id]||(e[i.page_id]=[]),e[i.page_id].push({chunkId:s.chunk_id,lines_box:i.lines,bbox:i.bbox})})):s.locations.forEach((s=>{a[s.page_id]||(a[+s.page_id]={page_w:s.page_w,page_h:s.page_h})}))})),{chunks:[...e],pageSizes:[...a]}}}});export{a as u};
