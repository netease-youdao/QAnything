import{u as x}from"./useUploadFiles-DgMSXBZV.js";import{r as T,u as E}from"./utils-Ugh35qEN.js";import{x as Q,a6 as _,r,w as y}from"./index-CVjowkL6.js";const{currentId:A}=Q(x()),K=_("useQuickStart",()=>{const l=r([]),f=t=>{l.value=t},I=r(!1);let v=r(l.value.length);y(()=>l.value.length,()=>{v.value=l.value.length});const a=r([]),c=t=>{a.value=t},L=t=>{var o;const s=(((o=a.value.at(-1))==null?void 0:o.historyId)||0)+1,e={historyId:s,title:t,fileToBeSendList:[]},u=[...a.value,e];return c(u),s},g=t=>{const s=a.value.filter(e=>e.historyId!==t);c(s)},p=(t,s,e)=>{const u=a.value.map(o=>(o.historyId===s&&(o.title=t,o.kbId=e),o));c(u)},h=t=>a.value.find(s=>s.historyId===t),H=(t,s)=>{a.value.forEach(async e=>{e.historyId===t&&(await T(await E.kbConfig({kb_id:n.value,new_kb_name:s})),e.title=s)})},w=(t,s)=>{const e=h(t);Array.isArray(s)?e.fileToBeSendList.push(...s):e.fileToBeSendList.push(s)},i=r([]),k=(t,s)=>{const e={historyId:t,list:s};i.value.some(o=>o.historyId===t)?i.value.forEach(o=>{o.historyId===t&&(o.list=s)}):i.value.push(e)},C=t=>i.value.find(s=>s.historyId===t),b=t=>{i.value=i.value.filter(s=>s.historyId!==t),a.value=a.value.filter(s=>s.historyId!==t),d.value=null,n.value="",l.value=[]},d=r(null),S=t=>{d.value=t},n=r("");y(()=>n.value,()=>{console.log("kbIdbianle",n.value),A.value=n.value});const B=r(""),m=r(null);return{QA_List:l,setQaList:f,showLoading:I,contextLength:v,historyList:a,addHistoryList:L,deleteHistoryList:g,updateHistoryList:p,getHistoryById:h,renameHistory:H,addFileToBeSendList:w,chatList:i,addChatList:k,getChatById:C,clearChatList:b,chatId:d,setChatId:S,kbId:n,kbIdCopy:B,deleteChatId:m}},{persist:{storage:localStorage}});export{K as u};
