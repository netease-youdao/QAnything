import{u as t}from"./useUploadFiles-CYaJxLSn.js";import{r as e,u as a}from"./utils-BzG5gSak.js";import{j as s,Y as i,r as l,w as o}from"./index-CyT_JrVy.js";const{currentId:r}=s(t()),u=i("useQuickStart",(()=>{const t=l([]),s=l(!1);let i=l(t.value.length);o((()=>t.value.length),(()=>{i.value=t.value.length}));const u=l([]),d=t=>{u.value=t},n=t=>u.value.find((e=>e.historyId===t)),h=l([]),v=l(null),y=l("");o((()=>y.value),(()=>{r.value=y.value}));const I=l(""),c=l(null);return{QA_List:t,setQaList:e=>{t.value=e},showLoading:s,contextLength:i,historyList:u,addHistoryList:t=>{var e;const a=((null==(e=u.value.at(-1))?void 0:e.historyId)||0)+1,s={historyId:a,title:t,fileToBeSendList:[]},i=[...u.value,s];return d(i),a},deleteHistoryList:t=>{const e=u.value.filter((e=>e.historyId!==t));d(e)},updateHistoryList:(t,e,a)=>{const s=u.value.map((s=>(s.historyId===e&&(s.title=t,s.kbId=a),s)));d(s)},getHistoryById:n,renameHistory:(t,s)=>{u.value.forEach((async i=>{i.historyId===t&&(await e(await a.kbConfig({kb_id:y.value,new_kb_name:s})),i.title=s)}))},addFileToBeSendList:(t,e)=>{const a=n(t);Array.isArray(e)?a.fileToBeSendList.push(...e):a.fileToBeSendList.push(e)},chatList:h,addChatList:(t,e)=>{const a={historyId:t,list:e};h.value.some((e=>e.historyId===t))?h.value.forEach((a=>{a.historyId===t&&(a.list=e)})):h.value.push(a)},getChatById:t=>h.value.find((e=>e.historyId===t)),clearChatList:e=>{h.value=h.value.filter((t=>t.historyId!==e)),u.value=u.value.filter((t=>t.historyId!==e)),v.value=null,y.value="",t.value=[]},chatId:v,setChatId:t=>{v.value=t},kbId:y,kbIdCopy:I,deleteChatId:c}}),{persist:{storage:localStorage}});export{u};
